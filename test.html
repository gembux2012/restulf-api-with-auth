<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous" ></script>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">ReactPhp</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse d-flex flex-row-reverse " >
        <div class="navbar-nav fromJson">
            <li class="nav-item">
                <a class="nav-link"  href="vcbn" onclick="event.preventDefault(); menuLoad(data1)">User</a>
            </li>
        </div>
    </div>
</nav>




</body>
</html>
<script>
    data ={
        "top_item": {
                "level":"item",
                 "active":true,
                "href": "vcbn",
                "onclick" : "menuLoad(data1)"

        },
        "top_item1": {
            "level":"item",
            "href": "cvbn",
            "onclick" : ""

        },
        "dropdown_item": {
            'level' :"dropdown_item",
            "dropdown1": {
                "level":"item",
                "href": "cvn",
                "onclick" : ""
            },
            "dropdown2": {
                "level":"item",
                "href": "cvbn",
                "onclick" : ""
            },
        },
        "top_item2": {
            "level":"item",
            "href": "cvbn",
            "onclick" : ""

        },

    }

    data1={
        "Тоько что загрузили": {
            "level":"item",
            "active":true,
            "href": "vcbn",
            "onclick" : "menuLoad(data)"

        },
        "и меня": {
            "level":"item",
            "href": "cvbn",
            "onclick" : "fghsf"

        },
    }


    //(function( $ ){

     class fromJson{

        // i;
         el = ''
         constructor(data,opt,tag){

             this.tag = tag
             this.opt =opt
             this.draw(data,false)

         }
         static fromJson=function (data,opt) {
             if (!(this instanceof fromJson)) return new  fromJson(data,opt);

         }
         reload (data) {
             this.draw(data,false)
         }

         draw(data,dropdown){
             this.tag.children('.from_json').remove()
             this.prepare(data,dropdown)

             setTimeout(() => { console.log(this.el)},1000)
             if (this.opt['pozition'] == 'prepend')
                 this.tag.prepend(this.el)
             else
                 (this.tag.append(this.el),1000)
         }

         prepare(data, dropdown) {
             let el =''
             for (var k in data) {
                 let i = data[k];
                 if (typeof i === 'object') {
                     let href = data[k]['href']

                     let onclick = ''
                     if (data[k]['onclick']) {
                         onclick = (`"
                              event.preventDefault();
                              ${data[k]['onclick']}"`)
                     } else if(this.opt['onclick']){
                         onclick = (`"
                              event.preventDefault();
                              ${this.opt['onclick']}"`)
                     }


                     switch (data[k]['level']) {
                         case 'item':
                             if (!dropdown) {
                                 this.el += (`<li class="nav-item insert_from_json ${data[k]['active'] ? 'active' : ''}">
                                     <a class="nav-link" href=${href} onclick=${onclick}>${k}</a></li>\n`)
                             } else {
                                 this.el += (`<a class="dropdown-item insert_from_json" href=${href} onclick=${onclick}>${k}</a>\n`)
                             }
                             this.prepare(i, false)
                             break
                         case 'dropdown_item':
                             this.el += (`<li class="nav-item dropdown insert_from_json">\n
                                     <a class="nav-link dropdown-toggle" href=
                                      role="button" data-toggle="dropdown" >
                                      ${k}</a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">\n`)
                             this.prepare(i, true);
                             this.el += '\n</div>\n</li>'
                             break

                     }

                 }
             }




         }


/*
         $('.fromJson .insert_from_json').remove();
         if (opt['pozition'] == 'prepend')
         $('.fromJson').prepend(el)
         else
         $('.fromJson').append(el)
         */


     };




    jQuery.fn.extend( fromJson.fromJson(data,opt));

/*
    $.fn.fromJson =function (data,opt={
        'position': 'append',
        'href': '/',
        'onclick' :''

    }){

        this['fromJson'] = new fromJson(data,opt,this);
    };
    //})( jQuery );

*/

    $('.fromJson').fromJson(data,{
        'position': 'append', //default | prepend
        'href': '/', //default
        'onclick' :'zvzxcvz' //default

    });

    function menuLoad(data1){
        console.log($('.fromJson')['fromJson'])
        $('.fromJson').fromJson.reload(data1)
        //menu.reload(data1)

    }



</script>